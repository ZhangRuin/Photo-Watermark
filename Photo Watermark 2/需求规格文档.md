# 图片水印工具需求规格文档

## 1. 项目概述

### 1.1 项目名称
图片水印工具

### 1.2 项目简介
一个简单易用的图片水印桌面应用程序，支持添加文本水印，可自定义各种参数，支持批量处理。该工具旨在帮助用户轻松为图片添加个性化水印，保护知识产权或进行品牌宣传。

### 1.3 主要目标
- 提供简洁直观的用户界面，使非技术用户也能轻松使用
- 支持多种图片格式的批量处理
- 提供灵活的水印定制功能，包括文本、透明度、位置等
- 实现模板管理，方便用户保存和重用水印设置

## 2. 功能需求

### 2.1 文件处理

#### 2.1.1 导入图片
- **单张导入**：支持通过文件选择器导入单张图片
- **批量导入**：支持一次选择并导入多张图片
- **文件夹导入**：支持直接导入整个文件夹中的所有图片
- **拖拽导入**：支持通过拖拽方式将图片导入到程序中

#### 2.1.2 图片列表管理
- 显示已导入的图片文件名列表
- 支持通过点击列表项选择当前编辑的图片
- 为长列表提供垂直滚动条

#### 2.1.3 导出功能
- **自定义输出目录**：用户可选择水印后图片的保存位置
- **防覆盖保护**：默认禁止导出到原文件夹，防止意外覆盖
- **灵活命名规则**：
  - 保留原文件名
  - 支持添加自定义前缀/后缀

### 2.2 水印功能

#### 2.2.1 文本水印
- 支持自定义水印文本内容
- 提供文本输入框，支持任意字符输入

#### 2.2.2 透明度调节
- 提供滑块控制水印透明度（0-100%）
- 实时显示当前透明度百分比
- 支持透明度的精确调整

#### 2.2.3 位置控制
- **预设位置**：提供九宫格预设位置按钮（左上、中上、右上、左中、居中、右中、左下、中下、右下）
- **手动拖拽**：支持鼠标在预览区域直接拖拽水印到任意位置
- **位置记忆**：为每个导入的图片单独保存水印位置设置

#### 2.2.4 实时预览
- 对当前选中的图片实时显示水印效果
- 当调整水印参数（文本、透明度、位置）时，预览区域立即更新

### 2.3 模板管理

#### 2.3.1 保存模板
- 支持将当前水印设置（文本、透明度、位置）保存为模板
- 要求用户输入模板名称
- 对模板名称进行合法性验证（长度限制、非法字符检查等）

#### 2.3.2 加载模板
- 提供可视化的模板列表选择界面
- 支持通过点击直接选择要加载的模板
- 加载成功后立即应用模板设置并更新预览

#### 2.3.3 管理模板
- 显示所有已保存的模板列表
- 支持删除不需要的模板
- 提供删除确认机制，防止误操作
- 删除后自动刷新模板列表

### 2.4 配置管理

#### 2.4.1 自动保存配置
- 程序关闭时自动保存当前的水印设置
- 保存的配置包括水印文本、透明度等

#### 2.4.2 自动加载配置
- 程序启动时自动加载上次使用的配置
- 恢复用户之前的水印设置状态

## 3. 非功能需求

### 3.1 性能要求
- 图片加载和预览响应时间不超过2秒
- 水印应用处理速度快，批量处理效率高
- 内存占用合理，不超过500MB

### 3.2 可用性要求
- 用户界面简洁直观，操作流程清晰
- 提供足够的视觉反馈（如成功/失败提示）
- 支持键盘快捷键操作

### 3.3 兼容性要求
- 支持主流的图片格式：JPEG, PNG, BMP, TIFF等
- 兼容Windows 7/8/10/11操作系统
- 支持Python 3.7及以上版本

### 3.4 可靠性要求
- 提供错误处理机制，防止程序崩溃
- 操作前提供确认提示，避免误操作
- 支持配置备份功能

## 4. 数据需求

### 4.1 配置文件
- 存储用户的默认设置（水印文本、透明度等）
- 使用JSON格式存储，支持UTF-8编码

### 4.2 模板文件
- 每个模板独立存储为JSON文件
- 存储模板名称、水印文本、透明度、位置等信息

### 4.3 缓存数据
- 程序运行时临时存储图片和水印数据
- 为每个图片单独存储水印位置设置

## 5. 用户界面需求

### 5.1 主界面布局
- **左侧控制面板**：包含水印设置、模板管理等功能
- **右侧预览区域**：显示图片列表和水印预览
- 响应式设计，支持窗口大小调整

### 5.2 控制面板
- **水印文本输入区**：文本框和字体设置
- **透明度控制区**：滑块控制器和百分比显示
- **位置控制区**：九宫格位置按钮和拖拽区域
- **模板管理区**：保存、加载、管理模板的按钮组

### 5.3 预览区域
- **图片列表**：显示已导入图片的文件名
- **预览画布**：实时显示水印效果
- 支持滚动和缩放（可选功能）

### 5.4 对话框设计
- **保存模板对话框**：输入框和确认按钮
- **加载模板对话框**：模板列表、选择按钮、取消按钮
- **管理模板对话框**：模板列表、删除按钮、关闭按钮
- 所有对话框提供适当的标题和操作提示

## 6. 范围限定

### 6.1 功能范围
- 仅支持文本水印，不包括图片水印
- 不支持水印字体、颜色、大小等高级样式设置
- 不支持批量导出格式转换

### 6.2 技术限制
- 使用Tkinter作为GUI框架，功能受限于该框架
- 拖拽导入功能可能因操作系统不同而有所差异

## 7. 验收标准

### 7.1 功能验收
- 所有导入方式（单张、批量、文件夹、拖拽）均能正常工作
- 水印文本、透明度、位置设置正确应用
- 模板保存、加载、管理功能完整可用
- 图片导出功能正确且文件未被损坏

### 7.2 性能验收
- 程序启动时间不超过3秒
- 图片加载和预览响应及时
- 批量处理10张图片的时间不超过30秒

### 7.3 可用性验收
- 用户能在3次尝试内完成基本操作
- 所有操作有明确的视觉反馈
- 错误提示信息清晰易懂

## 8. 风险/依赖备注

### 8.1 已知风险
- Tkinter对中文显示的支持可能需要额外配置
- 高分辨率图片处理可能导致性能下降
- 系统权限问题可能影响文件操作

### 8.2 依赖项
- Python 3.7+
- Pillow库（图像处理）
- Tkinter库（GUI）

