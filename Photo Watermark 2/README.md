# 图片水印工具

一个功能完善、界面友好的图片水印桌面应用程序，支持添加文本水印，自定义各种参数，提供批量处理能力，帮助您轻松保护图片版权或进行品牌宣传。

![Python版本](https://img.shields.io/badge/python-3.7%2B-blue)
![操作系统](https://img.shields.io/badge/OS-Windows-green)

## 功能特性

### 🔄 文件处理
- **多种导入方式**：支持文件选择器单张导入、批量导入、整个文件夹导入
- **拖拽导入**：支持将图片直接拖拽到程序窗口中导入
- **图片列表管理**：清晰显示已导入图片，支持快速切换查看

### 📊 格式支持
- **输入格式**：JPEG, PNG, BMP, TIFF等主流图片格式
- **输出格式**：支持保持原格式或选择JPEG/PNG格式导出

### 💾 导出功能
- **自定义输出路径**：自由选择导出文件夹位置
- **智能防覆盖**：默认禁止导出到原文件夹，避免意外覆盖原始文件
- **灵活命名选项**：保留原文件名、添加自定义前缀/后缀

### ✏️ 水印功能
- **文本水印**：完全自定义水印文本内容
- **透明度控制**：通过滑块精确调节水印透明度（0-100%）
- **位置灵活设置**：
  - **九宫格预设**：快速定位到常用位置
  - **自由拖拽**：鼠标直接拖拽到任意位置
  - **位置记忆**：为每个图片单独保存水印位置设置

### 🔍 实时预览
- 所有水印调整即时显示效果
- 缩放适配不同尺寸图片，确保预览清晰

### 📋 模板管理
- **保存模板**：一键保存当前水印设置为模板
- **模板选择**：可视化模板列表，点击即可加载
- **模板管理**：查看、删除不需要的模板
- **自动配置**：程序启动时自动恢复上次使用的设置

## 系统要求

- **操作系统**：Windows 7/8/10/11
- **Python版本**：3.7或更高版本
- **内存需求**：建议4GB以上内存
- **存储空间**：至少100MB可用空间

## 安装指南

### 方法一：直接运行Python脚本

1. **安装Python环境**
   - 从[Python官网](https://www.python.org/downloads/)下载并安装Python 3.7或更高版本
   - 安装时请勾选「Add Python to PATH」选项

2. **安装依赖库**
   - 打开命令提示符(CMD)或PowerShell
   - 导航到程序所在文件夹
   - 运行以下命令安装依赖：
     ```
     pip install -r requirements.txt
     ```

3. **运行程序**
   - 在同一命令窗口运行：
     ```
     python main.py
     ```
   - 或者直接双击`main.py`文件

### 方法二：打包成可执行文件

如果您不想安装Python，可以将程序打包成可执行文件：

1. 安装PyInstaller：
   ```
   pip install pyinstaller
   ```

2. 打包程序：
   ```
   pyinstaller --onefile --windowed --name "图片水印工具" main.py
   ```

3. 打包完成后，可执行文件将位于`dist`文件夹中

## 使用教程

### 基本操作流程

1. **导入图片**
   - 点击「导入图片」按钮选择单张或多张图片
   - 点击「导入文件夹」按钮导入整个文件夹的图片
   - 直接将图片拖拽到程序窗口

2. **设置水印**
   - 在文本框中输入水印内容
   - 使用滑块调整水印透明度
   - 点击九宫格按钮或拖拽水印调整位置
   - 实时预览区域会立即显示效果

3. **导出图片**
   - 点击「导出图片」按钮
   - 选择输出文件夹
   - 设置命名规则
   - 点击「确定」完成导出

### 模板使用

1. **保存当前设置为模板**
   - 完成水印设置后，点击「保存当前设置为模板」按钮
   - 输入模板名称，点击「确定」

2. **加载模板**
   - 点击「加载模板」按钮
   - 在弹出的模板列表中选择要使用的模板
   - 点击模板名称即可应用设置

3. **管理模板**
   - 点击「管理模板」按钮
   - 在模板列表中可以删除不需要的模板
   - 点击「关闭」按钮返回主界面

## 功能详解

### 图片水印位置个性化

程序会为每张导入的图片单独保存水印位置设置，让您可以：
- 为不同尺寸或构图的图片设置最合适的水印位置
- 切换图片时，水印位置会自动恢复到该图片上次设置的位置
- 批量导出时，每张图片都会使用其单独设置的水印位置

### 水印实时拖拽功能

通过鼠标在预览区域直接拖拽水印，您可以：
- 精确控制水印的最终位置
- 实时看到位置变化效果
- 位置会被自动保存到当前图片的设置中

### 配置自动保存与加载

程序会自动：
- 在关闭时保存当前的水印文本和透明度设置
- 在启动时自动恢复这些设置，避免重复输入
- 为常用设置提供模板管理功能

## 常见问题解答

### Q: 如何调整水印的位置？
A: 有两种方法：1) 点击九宫格位置按钮快速定位；2) 在预览区域直接拖拽水印到任意位置。

### Q: 为什么我不能导出到原文件夹？
A: 这是为了保护您的原始文件不被意外覆盖。如果需要替换原文件，建议先备份，然后手动复制覆盖。

### Q: 程序启动时能否记住我上次的水印设置？
A: 是的，程序会自动保存并加载您上次关闭时的水印文本和透明度设置。

### Q: 我可以为不同图片设置不同水印位置吗？
A: 可以，程序会为每个导入的图片单独保存水印位置设置，切换图片时会自动恢复对应位置。

### Q: 如何删除不需要的模板？
A: 点击「管理模板」按钮，在模板管理界面中为每个模板提供了「删除」按钮。

## 故障排除

### 程序无法启动
- 确保已正确安装Python 3.7或更高版本
- 确认所有依赖库都已安装：`pip install -r requirements.txt`
- 检查是否有足够的系统权限

### 图片导入失败
- 检查图片格式是否受支持
- 确认图片文件未被其他程序占用
- 检查文件权限是否足够

### 导出图片出错
- 确认输出文件夹路径有效
- 检查是否有写入权限
- 关闭可能正在使用目标文件的其他程序

### 水印显示异常
- 检查水印文本是否包含特殊字符
- 尝试调整透明度，可能太透明导致难以看见

